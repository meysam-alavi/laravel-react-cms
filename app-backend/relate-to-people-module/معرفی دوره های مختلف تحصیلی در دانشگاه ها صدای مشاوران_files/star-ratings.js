!function(t,n,s,f){t.fn.dfstarratings=function(n){t.fn.dfstarratings.options=t.extend({ajaxurl:null,nonce:null,func:null,grs:!1,msg:"امتیاز دهید!",fuelspeed:400,thankyou:"متشکریم",error_msg:"مشکلی پیش آمد",tooltip:!0,tooltips:{0:{tip:"ضعیف",color:"red"},1:{tip:"نسبتا بد",color:"brown"},2:{tip:"متوسط",color:"orange"},3:{tip:"خوب",color:"blue"},4:{tip:"عالی",color:"green"}}},t.fn.dfstarratings.options,n?n:{});var s=[];return this.each(function(){s.push(t(this))}),t.fn.dfstarratings.fetch(s,0,"0%",t.fn.dfstarratings.options.msg,!0),this.each(function(){})},t.fn.dfstarratings.animate=function(n){if(n.hasClass("disabled"))t(".dffr-stars a",n).unbind("click").click(function(){return!1});else{var s=t(".dffr-legend",n).html(),f=t(".dffr-fuel",n).css("width");t(".dffr-stars a",n).hover(function(){var f=t(this).attr("href").split("#")[1];0!=t.fn.dfstarratings.options.tooltip&&(null!=t.fn.dfstarratings.options.tooltips[f-1]?t(".dffr-legend",n).html('<span style="color:'+t.fn.dfstarratings.options.tooltips[f-1].color+'">'+t.fn.dfstarratings.options.tooltips[f-1].tip+"</span>"):t(".dffr-legend",n).html(s)),t(".dffr-fuel",n).stop(!0,!0).css("width","0%"),t(".dffr-stars a",n).each(function(s,r){var a=t(this),e=a.attr("href").split("#")[1];parseInt(e)<=parseInt(f)&&(t(".dffr-stars a",n).stop(!0,!0),a.hide().addClass("dffr-star").addClass("orange").fadeIn("fast"))})},function(){t(".dffr-stars a",n).removeClass("dffr-star").removeClass("orange"),0!=t.fn.dfstarratings.options.tooltip&&t(".dffr-legend",n).html(s),t(".dffr-fuel",n).stop(!0,!0).animate({width:f},t.fn.dfstarratings.options.fuelspeed)}).unbind("click").click(function(){return t.fn.dfstarratings.click(n,t(this).attr("href").split("#")[1])})}},t.fn.dfstarratings.update=function(n,s,f,r,a){"true"==r&&t(".dffr-fuel",n).removeClass("yellow").addClass("orange"),t(".dffr-fuel",n).stop(!0,!0).animate({width:s},t.fn.dfstarratings.options.fuelspeed,"linear",function(){if("true"==r&&(n.addClass("disabled"),t(".dffr-stars a",n).unbind("hover")),t.fn.dfstarratings.options.google_schema_legend&&a)t.fn.dfstarratings.animate(n);else{if(f)var s=f;else var s=t.fn.dfstarratings.options.msg;if("true"==s)var s=t.fn.dfstarratings.options.msg;t(".dffr-legend",n).stop(!0,!0).hide().html(s).fadeIn("slow",function(){t.fn.dfstarratings.animate(n)})}})},t.fn.dfstarratings.click=function(n,s){t(".dffr-stars a",n).unbind("hover").unbind("click").removeClass("dffr-star").removeClass("orange").click(function(){return!1});var f=t(".dffr-legend",n).html(),r=t(".dffr-fuel",n).css("width");return t.fn.dfstarratings.fetch(n,s,r,f,!1),!1},t.fn.dfstarratings.fetch=function(n,s,f,r,a){var e=[];t.each(n,function(){e.push(t(this).attr("data-id"))}),t.ajax({url:t.fn.dfstarratings.options.ajaxurl,data:"action="+t.fn.dfstarratings.options.func+"&id="+e+"&stars="+s+"&_wpnonce="+t.fn.dfstarratings.options.nonce,type:"post",dataType:"json",beforeSend:function(){t(".dffr-fuel",n).animate({width:"0%"},t.fn.dfstarratings.options.fuelspeed),s&&t(".dffr-legend",n).fadeOut("fast",function(){t(".dffr-legend",n).html('<span style="color: green">'+t.fn.dfstarratings.options.thankyou+"</span>")}).fadeIn("slow")},success:function(s){t.each(n,function(){var n=t(this),e=n.attr("data-id");s[e].success?t.fn.dfstarratings.update(n,s[e].fuel+"%",s[e].legend,s[e].disable,a):t.fn.dfstarratings.update(n,f,r,!1,a)})},complete:function(){},error:function(s){t(".dffr-legend",n).fadeOut("fast",function(){t(".dffr-legend",n).html('<span style="color: red">'+t.fn.dfstarratings.options.error_msg+"</span>")}).fadeIn("slow",function(){t.fn.dfstarratings.update(n,f,r,!1,a)})}})},t.fn.dfstarratings.options={ajaxurl:Ajax_send_dffr_js.ajaxurl,func:Ajax_send_dffr_js.func,nonce:Ajax_send_dffr_js.nonce,google_schema_legend:Ajax_send_dffr_js.google_schema_legend,tooltip:Ajax_send_dffr_js.tooltip,tooltips:Ajax_send_dffr_js.tooltips,msg:Ajax_send_dffr_js.msg,fuelspeed:Ajax_send_dffr_js.fuelspeed,thankyou:Ajax_send_dffr_js.thankyou,error_msg:Ajax_send_dffr_js.error_msg}}(jQuery,window,document),jQuery(document).ready(function(t){t(".df-star-ratings").dfstarratings()});